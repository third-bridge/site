= Site Administration: Installation Guide
:toc: preamble
:toclevels: 5

== Understanding the authorization flow

.Forecast login sequence and token acquisition
[[forecast-login-sequence]]
[plantuml,forecast-login,png]
....
skinparam monochrome true

entity "forecast.pages/login"
entity "js/localStorage"
entity "Re-frame app-state"
boundary "/login"
database "customer-db"

"forecast.pages/login" -> "/login": Login request with `email` and `password` in body

"/login" <- "customer-db": get-user-auth-details called with email

"forecast.pages/login" <- "/login": 200 (OK) response with `user` and `token`

"forecast.pages/login" -> "js/localStorage": Set `user` and `token`

"forecast.pages/login" -> "Re-frame app-state": Set `user` and `token`
....
